<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<title>Web-based Machine Learning</title>
		<link href="data:," rel="icon">
		<script defer src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
		<script defer src="https://cdn.jsdelivr.net/npm/nifti-reader-js@0.5.4/release/current/nifti-reader.js"></script>
		<script defer src="https://unpkg.com/itk@14.1.1/umd/itk.js"></script>
		<script defer src="script.js"></script>
	</head>

	<body>
		<div style="border-style:groove;float:left;width:200px;">
			<div>
				<b>Model</b>
			</div>
			<div>
				<select id="modelSelect" onchange="selectModelName();" style="width:100%;">
				</select>
			</div>
			<div id="modelLoadFractionDiv">0%</div>
			<div>
				Input shape: <span id="modelInputShapeSpan"></span>
			</div>
			<div>
				Prediction shape: <span id="modelPredictionShapeSpan"></span>
			</div>
			<hr>
			<div>
				<b>Input</b>
			</div>
			<div>
				<input accept=".dcm,.nii,.nii.gz,.png,.jpg,.jpeg" id="loadImagesInputFile" onchange="loadImages()" type="file" multiple/>
			</div>
			<div>
				<input accept=".nii,.txt" id="loadPredictionsInputFile" onchange="loadPredictions()" type="file" disabled>
			</div>
			<div>
				Index: <span id="imageIndexSpan"></span>
			</div>
			<div>
				H&times;W: <span id="imageHeightSpan"></span> &times; <span id="imageWidthSpan"></span>
			</div>
			<div>
				Min value: <span id="imageValueMinSpan"></span>
			</div>
			<div>
				Max value: <span id="imageValueMaxSpan"></span>
			</div>
			<div>
				<button id="resetImageValueButton" onclick="resetImageValue()" disabled>Reset image value</button>
			</div>
			<hr>
			<div>
				<b>Inference</b>
			</div>
			<div>
				<button id="predictCurrentImageButton" onclick="predictCurrentImage()" disabled>Predict current image</button>
			</div>
			<div>
				<button id="predictAllImagesButton" onclick="predictAllImages()" disabled>Predict all images</button>
			</div>
			<div id="labelListDiv"></div>
			<div id="brushSizeDiv">
				Brush size:
				<input id="brushSizeInputRange" oninput="drawCanvas()" style="width:60%" type="range" value=20 disabled>
			</div>
			<div>
				<button id="savePredictionsToDiskButton" onclick="savePredictionsToDisk()" disabled>Save predictions to disk</button>
			</div>
			<hr>
			<div>
				<b>Training</b>
			</div>
			<div>
				Trainable: <span id="modelTrainableSpan"></span>
			</div>
			<div>
				<button id="trainLocallyButton" onclick="trainLocally()">Train locally</button>
			</div>
			<div id="epochsNumDiv">
				Epochs: <input id="epochsNumInputNumber" style="width:20%;" type="number" value=10>
			</div>
			<div id="epochCurrentDiv">
				Current epoch: <span id="epochCurrentSpan"></span>
			</div>
			<div id="lossDiv">
				Loss: <span id="lossSpan"></span>
			</div>
			<div id="accuracyDiv">
				Accuracy: <span id="accuracySpan"></span>
			</div>
			<div>
				<button id="saveModelToDiskButton" onclick="saveModelToDisk()">Save model to disk</button>
			</div>
			<div>
				<button id="saveModelToServerButton" onclick="saveModelToServer()">Save model to server</button>
			</div>
		</div>
		<div>
			<canvas id="imageCanvas" style="position:absolute;"></canvas>
			<canvas id="maskCanvas" style="position:absolute;opacity:0.5;"></canvas>
			<canvas id="brushCanvas" style="position:absolute;opacity:0.5;"></canvas>
		</div>
	</body>
</html>
